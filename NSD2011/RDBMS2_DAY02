DBMS2_DAY02
数据读写分离： 是存储数据的服务结构

把客户端访问数据库服务时的 查询访问select   和存储数据访问insert 分别给不同的数据库服务器处理。

不做读写分离处理的话 select 访问和 insert 访问都是同1台服务器处理。

	怎么实现数据的读写分离：
		1 通过程序员写代码实现
                2 使用MySQL服务的中间件软件提供的服务实现
  
	


准备1台新虚拟机 不需要安装数据库服务软件。
  配置IP为 192.168.4.57  配置YUM  关闭firewalld 和selinux 
  拷贝软件maxscale-2.1.2-1.rhel.7.x86_64.rpm	

		1 环境准备 把52 配置为 51 的从数据库服务器

		2 配置读写分离服务器192.168.4.57,具体如下
			1 安装软件
[root@host57 ~]# rpm -ivh  maxscale-2.1.2-1.rhel.7.x86_64.rpm

			2 修改配置文件


[root@host57 ~]#  vim /etc/maxscale.cnf


[maxscale]
threads=auto


[server1]
type=server
address=192.168.4.51
port=3306
protocol=MySQLBackend

[server2]
type=server
address=192.168.4.52
port=3306
protocol=MySQLBackend


[MySQL Monitor]
type=monitor
module=mysqlmon
servers=server1,server2
user=mysqla
passwd=123qqq...A
monitor_interval=10000





[Read-Write Service]
type=service
router=readwritesplit
servers=server1,server2
user=mysqlb
passwd=123qqq...A
max_slave_connections=100%


[MaxAdmin Service]
type=service
router=cli





[Read-Write Service]
type=service
router=readwritesplit
servers=server1,server2
user=mysqlb
passwd=123qqq...A
max_slave_connections=100%


[MaxAdmin Service]
type=service
router=cli



[Read-Write Listener]
type=listener
service=Read-Write Service
protocol=MySQLClient
port=4006

[MaxAdmin Listener]
type=listener
service=MaxAdmin Service
protocol=maxscaled
socket=default
port=4016
