node1]#  ceph-deploy purge node1 node2 node3
node1]#  ceph-deploy purgedata node1 node2 node3
node1]# cd ceph-cluster/
node1]# rm -rf  *
执行以上的命令清除错误的配置 ，检测集群环境后，重新再执行一遍
创建集群的命令


#############################################
块存储    (裸盘)     类似于自己买的移动硬盘  
在管理集群的主机上做如下操作：练习15分钟到10:00
1创建块存储镜像 (镜像：在大的空间里划分小空间使用)
									 (池子： 是存放镜像的文件夹)
			 
	      #查看已有池子  
		  #创建镜像  
		  #创建镜像 
		  #列出所有镜像
		  #查看镜像的详细信息
	      #动态的调整一样镜像的容量
						#加大容量
						#缩小容量
						
2 客户端使用镜像		  
	 在192.168.4.10做如下操作：  休息+练习 到 11：45 
		 2.1  安装访问ceph集群的软件包	
		 
		 2.2  从集群中的任意主机拷贝配置文件
							 拷贝ceph.conf  到客户端本机
		                     拷贝ceph.client.admin.keyring到客户端本机
							 
		 2.3   访问集群创建的镜像  rbd  map  jacob
														
		 2.4   查看本机磁盘信息 lsblk
		 
		 2.5   查看ceph集群共享的镜像 在本机叫的设备名 rbd  showmapped
		 2.6   格式化磁盘
		 2.7   在客户端本机创建挂载目录（也可以挂载到系统的自带目录下比如/mnt ）
		 2.8   向挂载目录下存储数据
		
		
		 
		 2.9 删除镜像（卸载  挂载的镜像）
				 注意：要退出挂载目录，才能卸载
				 2.9.1  卸载挂载
				 2.9.2  撤销磁盘映射 
	
day04
一、块存储应用案例（实现对数据的备份）
				1.1 给镜像创建快照   (通过创建快照来保存镜像的状态)
							1.1.1  查看镜像是否创建了快照
					        1.1.2  创建快照						
			    1.2  使用镜像的快照恢复数据
							 1.2.1 在客户端挂载镜像 并查看数据
							 1.2.2  删除镜像里的数据
							 1.2.3 卸载挂载的镜像
							 1.2.4  在管理主机使用镜像快照还原数据
							 1.2.5   在客户端挂载镜像并查看数据（查看到数据为成功）
	
	快照克隆：在管理主机做如下操作：
						1  保护被克隆的快照 （被保护的快照不能被删除）
						2  创建快照的克隆
						3  查看克隆文件的信息
						4   把数据到给克隆文件  rbd    flatten  克隆文件名 
						5  删除源快照
									5.1 解除保护
									5.2 删除快照
									5.3  查看镜像的快照（看不到了）

二、文件存储  
			2.1 为什么要学习ceph的文件存储方式？
			实现文件存储共享：		
					1 在集群中任意1台主安装ceph-mds软件 提供文件共享服务（node3）
					2 在管理主机拷贝文件并启动服务
					3创建存储池(node3)
									要建设2个池子 （一个池子存储源数据  另一个池子存储数据）		
			        4 创建文件系统（把2个池子合体）
			           node3 ~]# ceph fs new myfs1 cephfs_metadata   cephfs_data						
					5 查看已有的文件系统
			        node3 ~]# ceph fs ls			
					6 客户端挂载共享
							  在连接的主机查看连接用户名和密码 ceph.client.admin.keyring
								客户端连接集群的中任意主机都可以访问文件系统
 ]# mkdir /myfs1
[root@client ~]# mount -t ceph 192.168.4.11:6789:/  /myfs1  
-o name=admin , secret=	AQA6QLhgFC3aExAASgeiil6+q0EjCyWfa69n3g==
     ]#  df  -h  /myfs1