###DBA1_DAY03
一、数据导入导出
	1.1 数据导入导出检索目录：（导入导出时存放数据的文件 保存的目录）
	    查看默认检索目录的位置
	mysql> show variables like  "secure_file_priv";
	[root@host50 ~]# ls -ld /var/lib/mysql-files/
drwxr-x--- 2 mysql mysql 6 11\u6708 29 2016 /var/lib/mysql-files/
         
	    修改检索目录的位置
[root@host50 ~]# systemctl  stop mysqld
[root@host50 ~]# vim /etc/my.cnf
[mysqld]
secure_file_priv="/myload"
:wq
	
]# mkdir /myload
]# chown mysql  /myload
]# setenforce  0

[root@host50 ~]# systemctl  start mysqld
[root@host50 ~]# mysql -uroot -p123qqq...A  -e 'show variables like "secure_file_priv"'	


1.2 数据导入： 把系统文件的内容存储到数据库的表里
	               具体操作
						1 创建存储数据库的库和表（要根据存储的数据创建表结构）
						2 把系统文件拷贝到检索目录下
						3 执行导入数据的命令
load  data  infile   "/目录名/文件名" into   table  库名.表名
fields terminated   by   "分隔符" lines  terminated  by   "\n";
 
						4 查看数据并做优化配置
					导入数据的注意事项（背诵）
					
	

例子 ：在db3库下 创建user表（自己设计表结构）存储 /etc/passwd文件里的用户信息。
mysql> create database db3; 
mysql> use db3;
mysql> show tables;
mysql> create table db3.user(
name char(50) , password char(1) , uid int , gid int,
comment  varchar(200) , homedir char(60) , shell char(50),
index(name) , primary key(uid)
);
mysql> desc db3.user;


]# cp  /etc/passwd   /myload/
]#  ls  /myload/passwd
 

mysql> system  wc -l  /myload/passwd

mysql> #执行导入数据的命令
mysql> load data infile "/myload/passwd" into table
       db3.user fields terminated by ":"  lines terminated by "\n" ;

       # 查看数据 
mysql> select  * from db3.user;

       优化配置(添加行号便于查找数据)
       alter table db3.user drop  primary key ;
	   
	   alter table  db3.user add   id  int auto_increment first, 
       add primary key(id,uid);
	   
	   desc  db3.user;
	   select  * from  db3.user;

补充: auto_increment 与primary key  关系 
      
	  auto_increment 依赖 主键  配置auto_increment 必须同时配置主键
	  
	  auto_increment设置存在时，不能删除主键，
	  
	  要先去掉auto_increment  主键才能删除。
 
		1.3 数据导出 : 把表记录存储到系统文件里
			命令格式 
			select查询命令  into   outfile  "/检索目录/文件名" 
			[ fields  terminated by "表头值的间隔符号"  
			lines terminated by "记录的间隔符号" ];
 
           导出数据的注意事项（背诵）
	        导出数据例子 ：			
mysql> select * from db3.user where id <= 2 
       into outfile  "/myload/a.txt"
 
mysql> select name , uid , shell from db3.user where id <= 2
    into outfile "/myload/b.txt" fields terminated by ":";

mysql> select name , uid , shell from db3.user where id <= 2 
    into outfile "/myload/c.txt" fields terminated by ":" 
	lines terminated by "!!!!";

mysql> system ls   /myload/*.txt		
mysql> system vim  /myload/a.txt

二、表记录的基本管理（记录就是表里的行）
     （增）添加新行 insert into (新行都追加在末尾)
		   
		  添加1条记录给所有列赋值
		   insert into  库.表   values (值列表);

insert into db3.user values 
(30,"bob","x",2000,2000,"test user","/home/bob","/bin/bash");


		  添加多条记录给所有列赋值
		  insert into  库.表   values (值列表),(值列表),(值列表)....;
insert into db3.user values
(40,"bob2","x",3000,2000,"test user","/home/bob","/bin/bash"),
(50,"bob3","x",3001,2000,"test user","/home/bob","/bin/bash");		  

          添加1条记录只给指定的列赋值
		  insert into  库.表(列名列表)   values (值列表);
insert  into  db3.user(name,uid,shell) values("tom",2001,"/sbin/nologin");
		   
insert  into  db3.user(name,password,uid,gid,comment,homedir,shell) 
values("a","x",4000,4000,"test","/a","xxx");



