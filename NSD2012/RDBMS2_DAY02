####RDBMS2_DAY02
一、数据读写分离
	数据读写分离介绍？把客户端访问数据的查询请求select 和 写请求分别给
	不同的数据库服务器处理。
	        从数据库服务器的数据和主数据库服务器的数据是一样
	mysql -h主数据库服务器 192.168.4.51   30000并发
	MySQL> select  -----> 从数据库服务器   12000
	mysql> insert  -----> 主数据库服务器   18000
	
	
	如何实现数据的读写分离呢？
		1 通过程序实现
		   程序员在编写查询select 数据的脚本时固定连接slave服务器
	       程序员在编写 写insert update delete 数据的脚本时固定连接master服务器
	
	    2 搭建服务实现数据的读写分离
		     
		3 提供数据读写分离服务的软件（开源）	 
			mysql-proxy   MyCat  Maxscale
			
4 配置数据读写分离服务器
		
	      4.1 环境准备 (一主一从结构)
	          保证51(master)和52（slave）的一主一从结构能够正常同步数据
	
	      4.2 准备提供读写分离服务主机 57
              (把57 从主主结构摘出来。成为独立的数据库服务器)  
			  具体步骤如下：
			  1 安装软件
	[root@host57 ~]# yum -y install maxscale-2.1.2-1.rhel.7.x86_64.rpm 


              2 修改配置文件（根据环境修改配置）
			   vim /etc/maxscale.cnf
			   [maxscale]  服务启动后，开启线程的数据
               threads=auto

[server1]   定义第1台数据库服务器 
type=server
address=192.168.4.51
port=3306
protocol=MySQLBackend

[server2]  定义第2台数据库服务器
type=server
address=192.168.4.52
port=3306
protocol=MySQLBackend

[MySQL Monitor] 监视数据库服务器server1 server2 
type=monitor
module=mysqlmon
servers=server1,server2
user=mysqla  监控用户
passwd=123qqq...A 连接密码
monitor_interval=10000

#[Read-Only Service]  不提供只读服务（要提供的是读写分离服务）
#type=service
#router=readconnroute
#servers=server1
#user=myuser
#passwd=mypwd
#router_options=slave