####db1_day03 知识点回顾
1  数据导入与导出
	  检索目录 、导入数据  、 导出数据

2 管理表记录  select    update  insert   delete 


3 匹配条件( 可以适应于 select   update   delete )
		基本 匹配 ：数值比较  字符比较  范围匹配   空  非空
		                    逻辑匹配  
		高级匹配   ： 计算   正则表达式     模糊匹配

        操作查询结果： 排序   分组   过滤   限制行数  去重显示  聚集函数 
		
4  phpmyadmin 图形工具的安装与使用
	4.1 部署运行环境 lamp
	4.2 安装phpmyadmin，步骤如下：
			1 解包    2 拷贝到网页目录下    3 创建主配置文件并修改
			4 客户端输入软件的网址访问
			    http://192.168.4.50/phpmyadmin


DBA1_DAY04
1 用户授权（用户管理）
		在数据库服务器上，使用数据库管理员登陆后，添加新用户 
		给客户端连接使用，默认只允许数据库管理员root 用户 自己连接自己
		
		1.1  授权（添加新用户）
				命令1 ： grant   权限列表   on   库名    to  用户名@"客户端地址"  
				             identified by   "密码" ;
		
				命令2 ： grant   权限列表   on   库名    to  用户名@"客户端地址"  
				             identified by   "密码"   with  grant  option ;
				
			     参数的表示方式？ 详细见PPT
                 授权的例子：见ppt 
                 
		
		1.2  授权库（mysql库介绍）
             查看表记录可以获取用户权限；也可以通过更新记录，修改用户权限

				desc  mysql.user;
				select  user ,  host   from   mysql,user;
				
				mysql> show grants for  mydba@"%";
+--------------------------------------------------------------+
| Grants for mydba@%                                           |
+--------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'mydba'@'%' WITH GRANT OPTION |
+--------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> select * from mysql.user 
where user="mydba" and host="%" \G

	
mysql> update mysql.user set  delete_priv="N" , drop_priv="N" 
where user="mydba" and host="%" ;

mysql> flush privileges;

mysql> select * from mysql.user 
where user="mydba" and host="%" \G

mysql> show grants for  mydba@"%";	



			mysql> desc mysql.db;

mysql> select user ,  host , db  from  mysql.db   \G 

mysql>  update  mysql.db  set  delete_priv="n" , update_priv="n" 
               where   db="db3" ;
			   
mysql>  flush  privileges;

mysql> show  grants  for  admin2@"localhost";

mysql> select   *  from  mysql.db   \G 


			mysql> desc  mysql.tables_priv ;

			mysql> select  *  from   mysql.tables_priv ;
			
			mysql> show grants for  admin@"192.168.4.%";

update  mysql.tables_priv  set   table_priv="select,insert,update"
where  user="admin" and  host="192.168.4.%"	;

flush  privileges;
		
mysql> show grants for  admin@"192.168.4.%";



		desc  mysql.columns_priv;
		
mysql> select * from   mysql.columns_priv;
		
mysql> update mysql.columns_priv 
set Column_priv="update,insert" where user="yaya2" ;

mysql> flush  privileges;
mysql> select * from   mysql.columns_priv;


1.3  撤销权限：删除已有用户的权限 
					命令：
revoke  权限列表  on  库名.表   from    用户名@"客户端地址";

  select  host , user from mysql.user;
  show  grants  for    mydba@"%";

mysql> revoke  grant option on *.*  from  mydba@"%";
mysql> revoke  select,insert,update  on *.*  from  mydba@"%";	
mysql> revoke  all  on *.*  from  mydba@"%";

	
		        删除用户
				drop   user  mydba@"%";
				
		1.4   管理用户的相关命令
		
	
		1.5  root密码管理（操作系统管理员有权限）
				1.5.1  修改root 用户本机登陆密码
]# mysqladmin -uroot -p旧密码  password "新密码"
]# mysqladmin -uroot -p123456  password "123qqq...A"

]# mysql -uroot -p123qqq...A    //使用新密码登陆

				1.5.2  恢复root 用户本机登陆密码,步骤如下：
]# vim /etc/my.cnf				
[mysqld]
skip-grant-tables			
#validate_password_policy=0
#validate_password_length=6
:wq
]# systemctl restart  mysqld

]# mysql   可以无密码的登陆
mysql> select  * from  mysql.user 
              where user="root" and host="localhost" \G

mysql> update  mysql.user 
set authentication_string=password("666...qqqA") 
where  user="root" and host="localhost" ;

mysql> flush privileges;
				
mysql> exit

]# vim /etc/my.cnf		
[mysqld]
#skip-grant-tables
:wq
]# systemctl restart  mysqld
]# mysql  -uroot  -p666...qqqA  使用修改后的密码登陆

2 完全备份
		2.1 数据备份的相关概念
						2.1.1 数据备份方式     冷备份      热备份 
						                                   物理备份   逻辑备份
						
			数据的物理备份和恢复
					备份
   cp -r /var/lib/mysql  /opt/
   scp -r /opt/mysql  root@192.168.4.51:/root/							
					恢复数据 步骤如下：			
								停止服务
								删除数据库目录
								把备份数据库拷贝到数据库目录里
								修改目录的所有者和组用户为mysql
								启动服务
								管理登陆查看数据
systemctl  stop mysqld
rm -rf /var/lib/mysql
cp -r /root/mysql   /var/lib/

chown  -R  mysql:mysql   /var/lib/mysql
systemctl  start mysqld
mysql -uroot -p123456


		2.2  数据的完全备份与恢复
		
3 增量备份 之 binlog日志的使用
		3.1 binlog日志介绍
		3.2 管理日志文件：
						启用日志
						查看日志
						创建新的日志文件
						删除日志文件
		3.2 使用日志文件恢复数据
					3.2.1  使用日志恢复所有数据
					3.2.2   使用日志恢复指定的数据